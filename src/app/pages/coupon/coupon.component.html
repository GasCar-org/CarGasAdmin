<div class="row">
  <div class="col-lg-12">
    <nb-card [nbSpinner]="loading" nbSpinnerStatus="success">
      <nb-card-header>اضافة او تعديل الكوبونات</nb-card-header>
      <nb-card-body>
        <toaster-container [toasterconfig]="config"></toaster-container>
        <form #form="ngForm">
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputPassword4">رقم الكوبون</label>
              <div class="input-group">
                <input type="text"  class="form-control" #name="ngModel" [(ngModel)]="coupon.coupon" 
                  [ngClass]="(name.invalid && (name.dirty || name.touched))?'form-control form-control-danger':'form-control'"
                  name="name" id="name" required />
              </div>
            </div>

            <div class="form-group col-md-6">
              <label for="inputPassword4">رسالة الاشعار</label>
              <div class="input-group">
                <input type="text" placeholder="رسالة الاشعار" class="form-control" #msg="ngModel" [(ngModel)]="coupon.msg"
                  [ngClass]="(msg.invalid && (msg.dirty || msg.touched))?'form-control form-control-danger':'form-control'"
                  name="msg" id="msg" required />
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="inputPassword4">فترة الصلاحية - من</label>
              <div class="input-group">
                <input type="text" name="dt_from" id="dt_from" bsDatepicker readonly #dt_from [(ngModel)]="coupon.dt_from" [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }"
                  [ngClass]="(dt_from.invalid && dt_from.dirty || dt_from.touched)?'form-control form-control-danger':'form-control'" />
              </div>
            </div>
            <div class="form-group col-md-4">
              <label for="inputPassword4">فترة الصلاحية - الى</label>
              <div class="input-group">
                <input type="text" name="dt_to" id="dt_to" bsDatepicker readonly #dt_to [(ngModel)]="coupon.dt_to" [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }"
                  [ngClass]="(dt_to.invalid && dt_to.dirty || dt_to.touched)?'form-control form-control-danger':'form-control'" />
              </div>
            </div>
            <div class="form-group col-md-4">
              <label for="inputPassword4">نسبة الخصم</label>
              <div class="input-group">
                <input type="number" min=0 max=1 placeholder="نسبة الخصم" class="form-control" #discount_rate="ngModel"
                  [(ngModel)]="coupon.discount_rate" [ngClass]="(discount_rate.invalid && (discount_rate.dirty || discount_rate.touched))?'form-control form-control-danger':'form-control'"
                  name="discount_rate" id="discount_rate" required />
              </div>
            </div>
          </div>
          <div class="form-row">
            <button [disabled]="!form.valid" class="btn btn-success btn-round btn-demo" (click)="Save(coupon)">حفظ
              المعلومات</button>
          </div>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>



<nb-card>
  <nb-card-header>
    ادارة الكوبونات
  </nb-card-header>
  <nb-card-body>
    <ng2-smart-table [settings]="settings" [source]="source" (userRowSelect)="onUserRowSelect($event)" (deleteConfirm)="onDeleteConfirm($event)"></ng2-smart-table>
  </nb-card-body>
</nb-card>